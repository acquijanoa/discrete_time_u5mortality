NOTE: PROCEDURE PRINTTO used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
      

6          
7          /*
8          
9          	Program name: LHS000104.sas	
10         
11         	Description: 	Fits the cloglog model and print the rtf report (Table 3)
12         
13         	SAS version: 	9.4
14         
15         	Input: 	&homepath./data/derived/lhs000103_24aug25.sas7bdat	
16         
17         	Output: &homepath./output/lhs000104_T3_24aug25.rtf
18         			&homepath./data/derived/lhs000104_24aug25.sas7bdat
19         
20         */
21         options nonumber nodate;
22         
23         * Import libraries;
24         libname raw "&homepath/data/raw" ACCESS=READONLY;
NOTE: Libref RAW was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: J:\HCHS\STATISTICS\GRAS\QAngarita\LHS\LHS0001\data\raw
25         libname derv "&homepath/data/derived";
NOTE: Libref DERV was successfully assigned as follows: 
                                                           The SAS System

      Engine:        V9 
      Physical Name: J:\HCHS\STATISTICS\GRAS\QAngarita\LHS\LHS0001\data\derived
26         run;
27         
28         * Include needed files;
29         %include "&homepath./scripts/LHS000190/lhs000190.sas";
NOTE: Format ETHNICITY_C3_FMT has been output.
NOTE: Format MEDUC_C3_FMT has been output.
NOTE: Format MEDUC_C2_FMT has been output.
NOTE: Format FLOOR_MAT_C4_FMT has been output.
NOTE: Format CHILD_SEX_FMT has been output.
NOTE: Format HH_HEAD_C4_FMT has been output.
NOTE: Format FUEL_COOKING_C3_FMT has been output.
NOTE: Format MOM_OCCUPATION_C3_FMT has been output.
NOTE: Format PRECEDING_BIRTH_INTERVAL_C4_FMT has been output.
NOTE: Format PRECEDING_BIRTH_INTERVAL_C3_FMT has been output.
NOTE: Format BIRTH_WEIGHT_C4_FMT has been output.
NOTE: Format BIRTH_WEIGHT_C3_FMT has been output.
NOTE: Format AGE_MONTH_FMT has been output.
NOTE: Format WEALTH_INDEX_FMT has been output.
NOTE: Format WEALTH_INDEX_C3_FMT has been output.
NOTE: Format MAGE_BIRTH_FMT has been output.
NOTE: Format MAGE_BIRTH_C3_FMT has been output.
NOTE: Format URBAN_FMT has been output.
NOTE: Format ANC_QUALITY_SCORE_C2_FMT has been output.
NOTE: Format BIRTH_ORDER_C3_FMT has been output.
NOTE: Format BIRTH_ORDER_SPACING_C5_FMT has been output.
NOTE: Format SSUBREG_FMT has been output.
NOTE: Format ANY_SUBSTANCE_USE_FMT has been output.
NOTE: Format PRETERM_BIRTH_FMT has been output.
NOTE: Format REFNUM has been output.
NOTE: The NEGPAREN (in)format was specified on the right-hand side of an equal sign, but without a length specification. PROC 
      FORMAT will assume a default length of at least 40 for the format being generated. If this is an insufficient width, you can 
      rerun PROC FORMAT with an explicit width for the NEGPAREN (in)format, or provide a sufficient DEFAULT= option.
NOTE: Format PAREN has been output.
NOTE: Format PV has been output.

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
      

189        %include "&homepath./scripts/LHS000191/lhs00019103.sas";
255        
256        * define macro variables;
257        %let db_out = derv.&job._&sysdate.;
258        %let db_in = derv.LHS000103_24aug25;
259        
260        ods escapechar '^';
261        
262        * Count number of ids;
263        proc sql noprint;
264        	select count(distinct(cats(womenid,birthid))) into:n_births
265        	from &db_in;
266        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           4.94 seconds
      cpu time            0.06 seconds
                                                           The SAS System

      

267        
268        * Fit the logistic model;
269        proc surveylogistic data = &db_in;
270        	by _imputation_;
271        	cluster psu;
272        	strata strata;
273        	weight weight;
274        	class age(Ref="1") meduc_c3(Ref="1") wealth_index_c3(ref='3') mage_birth_c3(ref="2") preterm_birth(ref='0')
274      ! birth_order_spacing_c5(ref='0') region(ref='5')
275        		  birth_weight_c3(ref="2") child_sex(ref='1') urban ethnicity_c3(ref='3') anc_quality_score_c2(ref='1')
275      ! any_substance_use(ref='1') / param=ref;
276        	model died(event='1') = age child_sex birth_weight_c3 preterm_birth meduc_c3 ethnicity_c3  wealth_index_c3 urban
277        								 anc_quality_score_c2 birth_order_spacing_c5 mage_birth_c3 any_substance_use / link = cloglog;
278        	ods output  ParameterEstimates = db_estimates0;
279        run;

NOTE: The BY statement provides completely separate analyses of the BY groups.  It does not provide a statistically valid 
      subpopulation or domain analysis, where the total number of units in the subpopulation is not known with certainty. If you 
      want a domain analysis, you should include the DOMAIN variables in a DOMAIN statement.
NOTE: PROC SURVEYLOGISTIC is modeling the probability that died=1.
NOTE: Convergence criterion (GCONV=1E-8) satisfied.
NOTE: The above message was for the following BY group:
      Imputation Number=1
NOTE: PROC SURVEYLOGISTIC is modeling the probability that died=1.
NOTE: Convergence criterion (GCONV=1E-8) satisfied.
NOTE: The above message was for the following BY group:
      Imputation Number=2
NOTE: PROC SURVEYLOGISTIC is modeling the probability that died=1.
NOTE: Convergence criterion (GCONV=1E-8) satisfied.
NOTE: The above message was for the following BY group:
      Imputation Number=3
NOTE: PROC SURVEYLOGISTIC is modeling the probability that died=1.
NOTE: Convergence criterion (GCONV=1E-8) satisfied.
NOTE: The above message was for the following BY group:
      Imputation Number=4
NOTE: PROC SURVEYLOGISTIC is modeling the probability that died=1.
NOTE: Convergence criterion (GCONV=1E-8) satisfied.
NOTE: The above message was for the following BY group:
      Imputation Number=5
NOTE: PROC SURVEYLOGISTIC is modeling the probability that died=1.
NOTE: Convergence criterion (GCONV=1E-8) satisfied.
NOTE: The above message was for the following BY group:
      Imputation Number=6
NOTE: PROC SURVEYLOGISTIC is modeling the probability that died=1.
NOTE: Convergence criterion (GCONV=1E-8) satisfied.
NOTE: The above message was for the following BY group:
      Imputation Number=7
NOTE: PROC SURVEYLOGISTIC is modeling the probability that died=1.
NOTE: Convergence criterion (GCONV=1E-8) satisfied.
NOTE: The above message was for the following BY group:
      Imputation Number=8
NOTE: PROC SURVEYLOGISTIC is modeling the probability that died=1.
NOTE: Convergence criterion (GCONV=1E-8) satisfied.
NOTE: The above message was for the following BY group:
      Imputation Number=9
NOTE: PROC SURVEYLOGISTIC is modeling the probability that died=1.
                                                           The SAS System

NOTE: Convergence criterion (GCONV=1E-8) satisfied.
NOTE: The above message was for the following BY group:
      Imputation Number=10
NOTE: The data set WORK.DB_ESTIMATES0 has 250 observations and 10 variables.
NOTE: The PROCEDURE SURVEYLOGISTIC printed pages 1-40.
NOTE: PROCEDURE SURVEYLOGISTIC used (Total process time):
      real time           19.51 seconds
      cpu time            14.01 seconds
      

280        
281        * Arrange the dataset with the beta estimates;
282        data db_estimates;
283          length Parameter $82;
284          set db_estimates0;
285        
286           if missing(ClassVal0) then
287            Parameter = Variable;
288          else
289            Parameter = catx('_', Variable, ClassVal0);
290        
291          keep _imputation_ Parameter Estimate StdErr DF;
292        run;

NOTE: There were 250 observations read from the data set WORK.DB_ESTIMATES0.
NOTE: The data set WORK.DB_ESTIMATES has 250 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.03 seconds
      

293        
294        * Obtain the list of effects to use in MIANALYZE;
295        proc sql noprint;
296        	select distinct Parameter into:var_list separated by ' '
297        	from db_estimates
298        	;
299        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

300        
301        * Combine the estimates;
302        proc mianalyze parms=db_estimates;
303        	modeleffects &var_list;
304        	ods output ParameterEstimates = db_estimates_pooled_mi;
305        run;

NOTE: The data set WORK.DB_ESTIMATES_POOLED_MI has 25 observations and 12 variables.
NOTE: The PROCEDURE MIANALYZE printed pages 41-43.
NOTE: PROCEDURE MIANALYZE used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

306        
                                                           The SAS System

307        * Estimates;
308        data db_estimates_pooled;
309        	set db_estimates_pooled_mi;
310        
311        	* position;
312        	pos = findc(Parm, '_', 'b');
313        
314        	if anydigit(substr(Parm, pos+1)) then do;
315        		ClassVal1 = substr(Parm, pos+1);
316        		Variable = substr(Parm, 1, pos-1);
317        	end;
318        	else do;
319        		ClassVal1 = '';
320        		Variable = Parm;	
321        	end;
322        
323        	* keep variables;
324        	keep Variable ClassVal1 Estimate StdErr Probt;
325        run;

NOTE: There were 25 observations read from the data set WORK.DB_ESTIMATES_POOLED_MI.
NOTE: The data set WORK.DB_ESTIMATES_POOLED has 25 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.00 seconds
      

326        
327        * Insert reference values;
328        proc sql noprint;
329        	insert into db_estimates_pooled (Variable,ClassVal1,Estimate)
330        	values ('wealth_index_c3','3',97)
331        	values ('mage_birth_c3','2',97)
332        	values ('birth_weight_c3','2',97)
333        	values ('child_sex','1',97)
334        	values ('urban','1',97)
335        	values ('birth_order_spacing_','0',97)
336        	values ('ethnicity_c3','3',97)
337        	values ('anc_quality_score_c2','1',97)
338        	values ('any_substance_use','1',97)
339        	values ('age','1',97)
340        	values ('meduc_c3','1',97)
341        	values ('preterm_birth','0',97);
NOTE: 12 rows were inserted into WORK.DB_ESTIMATES_POOLED.

342        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

343        
344        * Insert labels to use in the report;
345        data &db_out.;
346        	set db_estimates_pooled;
347        	keep order label response estimate std pv;
348        
349        	response = "Log-Hazard ratio";
                                                           The SAS System

350        	%labels;
351        run;

NOTE: Missing values were generated as a result of performing an operation on missing values.
      Each place is given by: (Number of times) at (Line):(Column).
      12 at 350:71   
NOTE: There were 37 observations read from the data set WORK.DB_ESTIMATES_POOLED.
NOTE: The data set DERV.LHS000104_24AUG25 has 37 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           3.27 seconds
      cpu time            0.00 seconds
      

352        
353        * Print RTF report;
354        libname hchstyle 'J:\hchs\sc\styledef\sty904';
NOTE: Libref HCHSTYLE was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: J:\hchs\sc\styledef\sty904
355        ods path sashelp.tmplmst(read) hchstyle.hchs_stp(read);
356        ods listing close;
357        
358        ods rtf file = "&homepath./scripts/&job./&job._T3_&sysdate..rtf" style=manuscrt bodytitle;
NOTE: Writing RTF Body file: J:\HCHS\STATISTICS\GRAS\QAngarita\LHS\LHS0001/scripts/LHS000104/LHS000104_T3_24AUG25.rtf
359        %let fs = 11pt;
360        %let fs_body = 11pt;
361        %let fs_titles = 11pt;
362        %let lft_mgn = 1 in;
363        %let rgt_mgn = 1 in;
364        proc report data = &db_out.;
365        	title j=center height=&fs font='times roman' bold "Table 3. Discrete-Time Survival Estimates of the Hazard of Mortality
365      ! among Children under Five in Colombia, Demography and Health Survey 2015 (N=%qtrim(&n_births))";
366        	footnote1 J=LEFT HEIGHT=9.5pt FONT='times roman' "^S={leftmargin=&lft_mgn rightmargin=&rgt_mgn} Note(s): Estimates are
366      ! weighted using sampling weights and account for complex survey design." ;
367        	footnote2 J=LEFT HEIGHT=9.5pt FONT='times roman' "^S={leftmargin=1.6in rightmargin=&rgt_mgn} Log-Hazard Ratio estimates
367      ! are pooled across 10 imputed datasets following Rubin rules and standard errors incorporate both within and
367      ! between-imputation variability." ;
368        	footnote3 J=LEFT HEIGHT=10pt FONT='times roman' "{\line \line Job &job run using DHS 2015 data on %sysfunc(today(),
368      ! date9.) at%sysfunc(time(), timeampm.) }";
369        	columns order label response,(estimate std pv);
370        	define order / order group noprint order = internal;
371        	define label / display group ' ' style(header)=[just=left] style=[cellwidth=3.5in];
372        	define estimate / analysis 'Estimate' style=[vjust=bottom];
373        	define response / across ' ' ;
374        	define std / analysis '(SE)' style=[vjust=bottom];
375        	define pv / analysis ' ' group
376        					style=[vjust=bottom just=left]
377        					style(header)=[cellpadding = 0in cellheight=0in cellspacing=0in];
378        	format pv pv. std paren. estimate refnum. ;
379        	compute after _page_ / style = [just=left];
380        		line "* p <=.10, ** p <=.05, *** p <=.01 ";
381        	endcomp;
382        run;

NOTE: PROCEDURE REPORT used (Total process time):
      real time           0.19 seconds
      cpu time            0.00 seconds
      
                                                           The SAS System

NOTE: There were 37 observations read from the data set DERV.LHS000104_24AUG25.

383        ods rtf close;
384        
385        proc printto; run;

