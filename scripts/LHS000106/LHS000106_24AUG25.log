NOTE: PROCEDURE PRINTTO used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
      

6          
7          /*
8          	Program name: LHS000106.sas	
9          
10         	Description: Generate Table 2 including univariate descriptive
11         				analysis, but with frequencies and weighted percentage.
12         
13         	Version: SAS 9.4
14         
15         	Input:  &homepath./data/derived/lhs000101_24aug25
16         
17         	Output: &homepath/scripts/lhs000106/lhs000106_T2_24aug25.rtf
18         
19         */
20         options nodate nonumber;
21         
22         libname raw "&homepath/data/raw" ACCESS=READONLY;
NOTE: Libref RAW was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: J:\HCHS\STATISTICS\GRAS\QAngarita\LHS\LHS0001\data\raw
23         libname derv "&homepath/data/derived";
NOTE: Libref DERV was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: J:\HCHS\STATISTICS\GRAS\QAngarita\LHS\LHS0001\data\derived
                                                           The SAS System

24         libname hchstyle 'J:\hchs\sc\styledef\sty904';
NOTE: Libref HCHSTYLE was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: J:\hchs\sc\styledef\sty904
25         
26         * Include files;
27         %include "&homepath./scripts/lhs000190/lhs000190.sas";
NOTE: Format ETHNICITY_C3_FMT has been output.
NOTE: Format MEDUC_C3_FMT has been output.
NOTE: Format MEDUC_C2_FMT has been output.
NOTE: Format FLOOR_MAT_C4_FMT has been output.
NOTE: Format CHILD_SEX_FMT has been output.
NOTE: Format HH_HEAD_C4_FMT has been output.
NOTE: Format FUEL_COOKING_C3_FMT has been output.
NOTE: Format MOM_OCCUPATION_C3_FMT has been output.
NOTE: Format PRECEDING_BIRTH_INTERVAL_C4_FMT has been output.
NOTE: Format PRECEDING_BIRTH_INTERVAL_C3_FMT has been output.
NOTE: Format BIRTH_WEIGHT_C4_FMT has been output.
NOTE: Format BIRTH_WEIGHT_C3_FMT has been output.
NOTE: Format AGE_MONTH_FMT has been output.
NOTE: Format WEALTH_INDEX_FMT has been output.
NOTE: Format WEALTH_INDEX_C3_FMT has been output.
NOTE: Format MAGE_BIRTH_FMT has been output.
NOTE: Format MAGE_BIRTH_C3_FMT has been output.
NOTE: Format URBAN_FMT has been output.
NOTE: Format ANC_QUALITY_SCORE_C2_FMT has been output.
NOTE: Format BIRTH_ORDER_C3_FMT has been output.
NOTE: Format BIRTH_ORDER_SPACING_C5_FMT has been output.
NOTE: Format SSUBREG_FMT has been output.
NOTE: Format ANY_SUBSTANCE_USE_FMT has been output.
NOTE: Format PRETERM_BIRTH_FMT has been output.
NOTE: Format REFNUM has been output.
NOTE: The NEGPAREN (in)format was specified on the right-hand side of an equal sign, but without a length specification. PROC 
      FORMAT will assume a default length of at least 40 for the format being generated. If this is an insufficient width, you can 
      rerun PROC FORMAT with an explicit width for the NEGPAREN (in)format, or provide a sufficient DEFAULT= option.
NOTE: Format PAREN has been output.
NOTE: Format PV has been output.

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.09 seconds
      cpu time            0.00 seconds
      

187        %include "&homepath./scripts/lhs000191/lhs00019101.sas";
246        
247        ods escapechar "^";
248        
249        * define macro variables;
250        %let db_out = derv.&job._&sysdate.;
251        %let db_in_15 = derv.lhs000101_24aug25;
252        
253        * create the variable death;
254        data db_in_15;
255        	set &db_in_15.;
256        	death = (is_alive = 0);
257        run;

NOTE: There were 11649 observations read from the data set DERV.LHS000101_24AUG25.
                                                           The SAS System

NOTE: The data set WORK.DB_IN_15 has 11649 observations and 35 variables.
NOTE: DATA statement used (Total process time):
      real time           0.05 seconds
      cpu time            0.00 seconds
      

258        
259        * Number of ids;
260        proc sql noprint;
261        	select count(distinct(cats(womenid,birthid))) into:n_births
262        	from &db_in_15.;
263        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

264        
265        %macro design_based_pct_byvar(var=);
266        * Calculate design-based percentage and frequencies ;
267        proc surveyfreq data = db_in_15 missing;
268        	cluster psu;
269        	strata strata;
270        	weight weight;
271        	table  &var. / nototal ;
272        	ods output OneWay=OneWay(keep=&var. Frequency Percent rename=(&var.=ClassVal1));
273        run;
274        * Number of deaths;
275        proc surveyfreq data = db_in_15 missing;
276        	cluster psu;
277        	strata strata;
278        	weight weight;
279        	table death * &var. / nototal row;
280        	ods output CrossTabs=CrossTabs( keep=&var. death Frequency RowPercent
281        						rename=(&var.=ClassVal1 RowPercent=Per_d Frequency=Freq_d) where=(death=1) );
282        run;
283        * Merge the dataset with percentages and ChisQ p-value;
284        	data &var._out;
285        		merge OneWay Crosstabs(drop=death);
286        		by ClassVal1;
287        		length  Variable $50;
288        		Variable = "&var.";
289        	run;
290        %mend design_based_pct_byvar;
291        
292        * Use the macro to calculate percentages;
293        %design_based_pct_byvar(var = time_months_c6);

NOTE: The data set WORK.ONEWAY has 6 observations and 3 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 1.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      

NOTE: The data set WORK.CROSSTABS has 6 observations and 4 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 2.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
                                                           The SAS System

      real time           0.08 seconds
      cpu time            0.04 seconds
      


NOTE: There were 6 observations read from the data set WORK.ONEWAY.
NOTE: There were 6 observations read from the data set WORK.CROSSTABS.
NOTE: The data set WORK.TIME_MONTHS_C6_OUT has 6 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
      

294        %design_based_pct_byvar(var = birth_weight_c3);

NOTE: The data set WORK.ONEWAY has 4 observations and 3 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 3.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds
      

NOTE: The data set WORK.CROSSTABS has 4 observations and 4 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 4.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.06 seconds
      cpu time            0.03 seconds
      


NOTE: There were 4 observations read from the data set WORK.ONEWAY.
NOTE: There were 4 observations read from the data set WORK.CROSSTABS.
NOTE: The data set WORK.BIRTH_WEIGHT_C3_OUT has 4 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

295        %design_based_pct_byvar(var = preterm_birth);

NOTE: The data set WORK.ONEWAY has 2 observations and 3 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 5.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
      

NOTE: The data set WORK.CROSSTABS has 2 observations and 4 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 6.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.05 seconds
      cpu time            0.01 seconds
      


NOTE: There were 2 observations read from the data set WORK.ONEWAY.
NOTE: There were 2 observations read from the data set WORK.CROSSTABS.
NOTE: The data set WORK.PRETERM_BIRTH_OUT has 2 observations and 6 variables.
                                                           The SAS System

NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

296        %design_based_pct_byvar(var = child_sex);

NOTE: The data set WORK.ONEWAY has 2 observations and 3 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 7.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.17 seconds
      cpu time            0.01 seconds
      

NOTE: The data set WORK.CROSSTABS has 2 observations and 4 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 8.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.06 seconds
      cpu time            0.03 seconds
      


NOTE: There were 2 observations read from the data set WORK.ONEWAY.
NOTE: There were 2 observations read from the data set WORK.CROSSTABS.
NOTE: The data set WORK.CHILD_SEX_OUT has 2 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

297        %design_based_pct_byvar(var = mage_birth_c3);

NOTE: The data set WORK.ONEWAY has 3 observations and 3 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 9.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

NOTE: The data set WORK.CROSSTABS has 3 observations and 4 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 10.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
      


NOTE: There were 3 observations read from the data set WORK.ONEWAY.
NOTE: There were 3 observations read from the data set WORK.CROSSTABS.
NOTE: The data set WORK.MAGE_BIRTH_C3_OUT has 3 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

298        %design_based_pct_byvar(var = meduc_c3);

NOTE: The data set WORK.ONEWAY has 3 observations and 3 variables.
                                                           The SAS System

NOTE: The PROCEDURE SURVEYFREQ printed page 11.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
      

NOTE: The data set WORK.CROSSTABS has 3 observations and 4 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 12.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.07 seconds
      cpu time            0.04 seconds
      


NOTE: There were 3 observations read from the data set WORK.ONEWAY.
NOTE: There were 3 observations read from the data set WORK.CROSSTABS.
NOTE: The data set WORK.MEDUC_C3_OUT has 3 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

299        %design_based_pct_byvar(var = ethnicity_c3);

NOTE: The data set WORK.ONEWAY has 3 observations and 3 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 13.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      

NOTE: The data set WORK.CROSSTABS has 3 observations and 4 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 14.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.06 seconds
      cpu time            0.04 seconds
      


NOTE: There were 3 observations read from the data set WORK.ONEWAY.
NOTE: There were 3 observations read from the data set WORK.CROSSTABS.
NOTE: The data set WORK.ETHNICITY_C3_OUT has 3 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

300        %design_based_pct_byvar(var = anc_quality_score_c2);

NOTE: The data set WORK.ONEWAY has 3 observations and 3 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 15.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      

NOTE: The data set WORK.CROSSTABS has 3 observations and 4 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 16.
                                                           The SAS System

NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
      


NOTE: There were 3 observations read from the data set WORK.ONEWAY.
NOTE: There were 3 observations read from the data set WORK.CROSSTABS.
NOTE: The data set WORK.ANC_QUALITY_SCORE_C2_OUT has 3 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

301        %design_based_pct_byvar(var = any_substance_use);

NOTE: The data set WORK.ONEWAY has 3 observations and 3 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 17.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

NOTE: The data set WORK.CROSSTABS has 3 observations and 4 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 18.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.06 seconds
      cpu time            0.04 seconds
      


NOTE: There were 3 observations read from the data set WORK.ONEWAY.
NOTE: There were 3 observations read from the data set WORK.CROSSTABS.
NOTE: The data set WORK.ANY_SUBSTANCE_USE_OUT has 3 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

302        %design_based_pct_byvar(var = wealth_index_c3);

NOTE: The data set WORK.ONEWAY has 3 observations and 3 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 19.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
      

NOTE: The data set WORK.CROSSTABS has 3 observations and 4 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 20.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.08 seconds
      cpu time            0.06 seconds
      


NOTE: There were 3 observations read from the data set WORK.ONEWAY.
NOTE: There were 3 observations read from the data set WORK.CROSSTABS.
                                                           The SAS System

NOTE: The data set WORK.WEALTH_INDEX_C3_OUT has 3 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

303        %design_based_pct_byvar(var = urban);

NOTE: The data set WORK.ONEWAY has 2 observations and 3 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 21.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
      

NOTE: The data set WORK.CROSSTABS has 2 observations and 4 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 22.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.07 seconds
      cpu time            0.07 seconds
      


NOTE: There were 2 observations read from the data set WORK.ONEWAY.
NOTE: There were 2 observations read from the data set WORK.CROSSTABS.
NOTE: The data set WORK.URBAN_OUT has 2 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

304        %design_based_pct_byvar(var = birth_order_spacing_c5);

NOTE: The data set WORK.ONEWAY has 6 observations and 3 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 23.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      

NOTE: The data set WORK.CROSSTABS has 6 observations and 4 variables.
NOTE: The PROCEDURE SURVEYFREQ printed page 24.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.07 seconds
      cpu time            0.06 seconds
      


NOTE: There were 6 observations read from the data set WORK.ONEWAY.
NOTE: There were 6 observations read from the data set WORK.CROSSTABS.
NOTE: The data set WORK.BIRTH_ORDER_SPACING_C5_OUT has 6 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

305        
306        * Join the datasets;
                                                           The SAS System

307        data db_join;
308        	set time_months_c6_out urban_out birth_weight_c3_out birth_order_spacing_c5_out
309        			child_sex_out meduc_c3_out ethnicity_c3_out preterm_birth_out
310        			wealth_index_c3_out anc_quality_score_c2_out any_substance_use_out mage_birth_c3_out;
311        	by variable;
312        run;

NOTE: There were 6 observations read from the data set WORK.TIME_MONTHS_C6_OUT.
NOTE: There were 2 observations read from the data set WORK.URBAN_OUT.
NOTE: There were 4 observations read from the data set WORK.BIRTH_WEIGHT_C3_OUT.
NOTE: There were 6 observations read from the data set WORK.BIRTH_ORDER_SPACING_C5_OUT.
NOTE: There were 2 observations read from the data set WORK.CHILD_SEX_OUT.
NOTE: There were 3 observations read from the data set WORK.MEDUC_C3_OUT.
NOTE: There were 3 observations read from the data set WORK.ETHNICITY_C3_OUT.
NOTE: There were 2 observations read from the data set WORK.PRETERM_BIRTH_OUT.
NOTE: There were 3 observations read from the data set WORK.WEALTH_INDEX_C3_OUT.
NOTE: There were 3 observations read from the data set WORK.ANC_QUALITY_SCORE_C2_OUT.
NOTE: There were 3 observations read from the data set WORK.ANY_SUBSTANCE_USE_OUT.
NOTE: There were 3 observations read from the data set WORK.MAGE_BIRTH_C3_OUT.
NOTE: The data set WORK.DB_JOIN has 40 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

313        
314        * Insert label to the dataset;
315        data db_join;
316        	set db_join;
317        	* call the macro to create the column label to print in the report;
318        	%labels;
319        	* adjust percent;
320        	percent = percent/100;
321        	per_d = per_d/100;
322        run;

NOTE: Character values have been converted to numeric values at the places given by: (Line):(Column).
      318:99    318:14    318:125   318:237   318:95    318:208   318:64    318:197   318:56    318:196   318:55    318:171
      318:45    318:182   318:45    318:211   318:111   318:241   318:118   318:247   318:106   318:4     318:119   318:228
      318:130   318:236   318:105   318:2     318:119   318:14    318:178   318:41    318:159   318:66    318:178   318:38
      318:187   318:47    318:162   318:45    
NOTE: There were 40 observations read from the data set WORK.DB_JOIN.
NOTE: The data set WORK.DB_JOIN has 40 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

323        
324        * Print RTF report;
325        libname hchstyle 'J:\hchs\sc\styledef\sty904';
NOTE: Libref HCHSTYLE was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: J:\hchs\sc\styledef\sty904
326        ods listing close;
327        ods path sashelp.tmplmst(read) hchstyle.hchs_stp(read);
328        ods rtf file = "&homepath\scripts\&job.\&job._T2_&sysdate..rtf" style = manuscrt bodytitle;
NOTE: Writing RTF Body file: J:\HCHS\STATISTICS\GRAS\QAngarita\LHS\LHS0001\scripts\LHS000106\LHS000106_T2_24AUG25.rtf
                                                           The SAS System

329        %let fs = 11pt;
330        %let fs_body = 11pt;
331        %let fs_titles = 11pt;
332        %let lft_mgn = 1.3in;
333        %let rgt_mgn = 1.1in;
334        proc report data = db_join;
335        	title j=center height=11pt font='times roman' bold "^S={leftmargin=1.2in rightmargin=1.1in}Table 2. Child and Maternal
335      ! socioeconomic factors by child survival status, DHS 2015 (N=%qtrim(&n_births))";
336        	footnote1 j=left height=9.5pt font='times roman' "^S={leftmargin=&lft_mgn rightmargin=&rgt_mgn}Note: Percentages are
336      ! weighted using sampling weights and account for complex survey design.";
337        	footnote3 j=left height=10pt font='times roman' "{\line \line Job &job run using DHS2015 data on %sysfunc(today(),
337      ! date9.) at %qtrim(%sysfunc(time(), timeampm.))}";
338        	columns order label frequency percent freq_d per_d;
339        	define order / order group noprint order = internal;
340        	define label / display group ' ' style(header)=[just=left] style=[width = 3.5in];
341        	define frequency / analysis 'N' style=[vjust = bottom];
342        	define percent / analysis "Weighted %" style=[vjust=bottom just=right width=0.8in];
343        	define freq_d / analysis 'Deaths' style=[vjust = bottom];
344        	define per_d / analysis "Weighted %" style=[vjust=bottom just=right width=0.8in];
345        	format frequency Freq_d 8.0 percent per_d percent8.2 ;
346        run;

NOTE: PROCEDURE REPORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
      
NOTE: There were 40 observations read from the data set WORK.DB_JOIN.

347        ods rtf close;
348        
349        
350        proc printto; run;

